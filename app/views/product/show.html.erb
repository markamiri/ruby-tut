
<%= javascript_include_tag "application", "data-turbo-track": "reload", defer: true %>

<div style="margin-left: 40px; font-size: 28px; font-weight: bold;">
  PRODUCT DETAILS
</div>

<div class="product-page">

  <!-- Left side: Image -->
  <div class="product-page-left">

  <!-- Main product image -->
  <div class="product-page-image">
    <% if @product.ordered_images.any?%>
      <%= image_tag @product.ordered_images.first, 
            class: "main-product-image", 
            id: "main-product-image" %>
    <% else %>
      <span>No image available</span>
    <% end %>
  </div>

  <!-- Thumbnails -->
  <% if @product.images.attached? && @product.images.count > 1 %>
    <div class="thumbnail-gallery">
  <% @product.ordered_images.each do |image| %>
    <%= image_tag image,
          class: "thumbnail",
          onclick: "swapMainImage(this)" %>
  <% end %>
</div>

  <% end %>
</div>


  <!-- Right side: Details -->
  <div class="product-details">
    <div class="product-header">
        <h1 class="product-title"><%= @product.name %></h1>
        <p class="product-price">$<%= @product.price %></p>
    </div>


    <div class="product-option-row">
    <label for="size" class="detail-label">Quantity</label>
    <select id="size" class="product-select">
        <option value="">- [Required] Please select options -</option>
    </select>
    </div>


    <!-- Placeholder add-on -->
    <div class="addon">
      <p>Placeholder</p>
      <p class="addon-title">Shipping options</p>
      <select class="product-select">
        <option value="">- [Required] Please select options -</option>
      </select>
    </div>

    <!-- Quantity / Total -->
    <div class="quantity">
      <p><strong>Price(Quantity):</strong> $<%= @product.price %> (0 item)</p>
    </div>

    <!-- Action buttons -->
    <div class="actions">
      <button class="btn add-to-cart">Add to Cart</button>
      <button class="btn buy-now">Buy Now</button>
    </div>



    <div class="accordion">
  <div class="accordion-item">
    <div class="accordion-header">
      <span>Product Info</span>
      <span class="accordion-icon">+</span>
    </div>
    <div class="accordion-content">
      <p>Here’s some product info text that expands when clicked.</p>
    </div>
  </div>

  <div class="accordion-item">
    <div class="accordion-header">
      <span>Product Details</span>
      <span class="accordion-icon">+</span>
    </div>
    <div class="accordion-content">
      <p>Details about the product here.</p>
    </div>
  </div>

  <div class="accordion-item">
    <div class="accordion-header">
      <span>Help</span>
      <span class="accordion-icon">+</span>
    </div>
    <div class="accordion-content">
      <p>FAQ or help content here.</p>
    </div>
  </div>

  <div class="accordion-item">
    <div class="accordion-header">
      <span>Reviews</span>
      <span class="accordion-icon">+</span>
    </div>
    <div class="accordion-content">
      <p>Customer reviews go here.</p>
    </div>
  </div>

  <div class="accordion-item">
    <div class="accordion-header">
      <span>Q&amp;A</span>
      <span class="accordion-icon">+</span>
    </div>
    <div class="accordion-content">
      <p>Questions and answers section.</p>
    </div>
  </div>
</div>

  </div>
</div>


<script>
  document.addEventListener("turbo:load", () => {
    document.querySelectorAll(".accordion-header").forEach(header => {
      header.addEventListener("click", () => {
        const item = header.parentElement;
        item.classList.toggle("open");

        // Optional: toggle icon +/−
        const icon = header.querySelector(".accordion-icon");
        if (item.classList.contains("open")) {
          icon.textContent = "−";
        } else {
          icon.textContent = "+";
        }
      });
    });
  });
</script>
